<div *ngIf="shouldShowProgressBar()" >
    <hr>
    <md-progress-bar mode="indeterminate"></md-progress-bar>
    <hr>
</div>

<hr>
<div class="options-container">
    <md-slide-toggle (change)="this.showOptions = !this.showOptions" >Options</md-slide-toggle>
    <div *ngIf="this.showOptions" class="options">
        <br>
        <div id="yearContainer">
            <label>Year:
                <span class="label label-info">{{yearSliderValue.toString()}}</span>
            </label>
            <md-slider
                    min="1950"
                    max="2017"
                    step="1"
                    tickInterval="auto"
                    [value]="this.yearSliderValue"
                    thumbLabel="false"
                    (input)="mdSliderInput_Year($event)"
                    (change)="mdSliderChange_Year($event)"
            ></md-slider>
        </div>
        <div id="ratingValueContainer">
            <label>Rating Value:
                <span class="label label-info">{{ratingValueSliderValue.toLocaleString('en')}}</span>
            </label>
            <md-slider
                    min="1"
                    max="9.3"
                    step="0.1"
                    tickInterval="auto"
                    [value]="this.ratingValueSliderValue"
                    thumbLabel="false"
                    (input)="mdSliderInput_RatingValue($event)"
                    (change)="mdSliderChange_RatingValue($event)"
            ></md-slider>
        </div>
        <div id="ratingCountContainer">
            <label>Rating Count:
                <span class="label label-info">{{ratingCountSliderValue.toLocaleString('en')}}</span>
            </label>
            <md-slider
                    min="10000"
                    [max]="maxRatingCount"
                    step="100000"
                    tickInterval="1"
                    [value]=this.ratingCountSliderValue
                    thumbLabel="false"
                    (input)="mdSliderInput_RatingCount($event)"
                    (change)="mdSliderChange_RatingCount($event)"
            ></md-slider>
        </div>
    </div>

    <div *ngIf="!this.showOptions" class="settings row">
        <hr>
        <div class="col-xs-7">
            <label> Year:
                <span class="label label-info">{{yearSliderValue.toString()}}</span>
            </label>
            <label> Value:
                <span class="label label-info">{{ratingValueSliderValue.toLocaleString('en')}}</span>
            </label>
        </div>
        <div class="col-xs-5">
            <label>Count:
                <span class="label label-info">{{ratingCountSliderValue.toLocaleString('en')}}</span>
            </label>
        </div>
    </div>
</div>

<div class="row">
    <div class="span5">
        <table class="table table-striped table-condensed">
            <thead class="thead-inverse">
            <tr>
                <th class="col-xs-8">Movie</th>
                <th class="col-xs-1">Year</th>
                <th class="col-xs-1">IMDB Rating</th>
                <th class="col-xs-2">Rating Count</th>
            </tr>
            </thead>

            <!--First Solution with ng-template and ngFor
            advantage: you don't need to put ngFor into a parent tag like "tbody" anymore -->
            <tbody>
            <ng-template ngFor let-movie [ngForOf]="displayedMovies">
                <tr [@optionsTrigger]>
                    <td>
                        <a target="_blank" href= "{{ movie.imdbMovieUrl }}" > {{ movie.movie }} </a>
                    </td>
                    <td>{{ movie.year }}</td>
                    <td class="text-center">
                        <ng-template [ngIf]="movie.ratingValue > 6.7">
                            <span class="label label-success"> {{ movie.ratingValue }} </span>
                        </ng-template>
                        <ng-template [ngIf]="((movie.ratingValue <= 6.7) &&  (movie.ratingValue > 6))">
                            <span class="label label-warning"> {{ movie.ratingValue }} </span>
                        </ng-template>
                        <ng-template [ngIf]="(movie.ratingValue <= 6.0)">
                            <span class="label label-danger"> {{ movie.ratingValue }} </span>
                        </ng-template>
                    </td>
                    <td class="text-right">{{ movie.ratingCountString }}</td>
                </tr>
            </ng-template>

            <!--Alternative Solution with only ngFor
            <tbody *ngFor="let movie of displayedMovies">
                <tr>
                    <td>{{ movie.movie }}</td>
                    <td>{{ movie.year }}</td>
                    <td>{{ movie.ratingValue }}</td>
                    <td>{{ movie.ratingCount }}</td>
                </tr>
            </tbody>

            -->
            </tbody>
        </table>
    </div>
</div>

<!-- EXAMPLE HOW TO USE ngIf WITH TEMPLATES

<ng-template ngFor let-movie [ngForOf]="displayedMovies">
    <ng-template #good>
        <span class="label label-success"> {{ movie.ratingValue }} </span>
    </ng-template>
    <ng-template #bad>
        <span class="label label-success"> {{ movie.ratingValue }} </span>
    </ng-template>

    <tr>
        <td>
            <a target="_blank" href= "{{ movie.imdbMovieUrl }}" > {{ movie.movie }} </a>
        </td>
        <td>{{ movie.year }}</td>
        <td *ngIf="movie.ratingValue > 6.7; then good else bad"></td>
        <td>{{ movie.ratingCount }}</td>
    </tr>
</ng-template>

-->


<!--
<button [disabled]="!allowNewServer" class="btn btn-primary" (click)="registerForWebRequest()">Send Get Request</button>
-->

<!--
<p>Current network status: <span id="status" [ngClass] = this.onlineString>{{this.onlineString}}</span></p>
-->
