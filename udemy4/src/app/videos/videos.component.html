<div *ngIf="shouldShowProgressBar()" >
    <md-progress-bar mode="indeterminate"></md-progress-bar>
</div>

<p>Showing {{ this.displayedMovies.length }} | matching
    {{ this.filteredMovies.length }} | total {{ this.allMovies.length }}</p>
<p>{{ this.scrolls }}</p>

<div class="row infiniteScrollWrapper">
    <!--[infiniteScrollContainer]='infiniteScrollWrapper'-->
    <div class="span5 search-results">
        <!--infiniteScroll
        [infiniteScrollDistance]="2"
        [infiniteScrollUpDistance]="2"
        [infiniteScrollThrottle]="10"
        [scrollWindow]="false"
        (scrolled)="onScrollDown()"
        (scrolledUp)="onScrollUp()">-->

        <table class="table table-striped table-condensed">
            <thead class="thead-inverse">
            <tr>
                <th class="col-xs-8">Movie <br>
                    <md-input-container>
                        <input class="filterInput"
                               mdInput [(ngModel)]="searchString"
                               (ngModelChange)="filterMovies()"
                               placeholder="Search for movie.."
                        >
                    </md-input-container>
                </th>
                <th class="col-xs-1">Year <br>
                    <label><span
                            class="label label-info" (click)="openYearDialog()">{{minYearValueFilter.toString()}}</span>
                    </label>
                </th>
                <th class="col-xs-1 text-center">IMDB Rating <br>
                    <label><span
                            class="label label-info" (click)="openRatingValueDialog()">{{minRatingValueFilter.toLocaleString('en')}}</span>
                    </label>
                </th>
                <th class="col-xs-2 text-right">Rating Count <br>
                    <label><span
                            class="label label-info" (click)="openRatingCountDialog()">{{minRatingCountFilter.toLocaleString('en')}}</span>
                    </label>
                </th>
            </tr>
            </thead>

            <!--First Solution with ng-template and ngFor
            advantage: you don't need to put ngFor into a parent tag like "tbody" anymore -->
            <tbody>
            <ng-template ngFor let-movie [ngForOf]="displayedMovies">
                <tr [@optionsTrigger]>
                    <td>
                        <a target="_blank" href= "{{ movie.imdbMovieUrl }}" > {{ movie.movie }} </a>
                    </td>
                    <td>{{ movie.year }}</td>
                    <td class="text-center">
                        <ng-template [ngIf]="movie.ratingValue > 6.7">
                            <span class="label label-success"> {{ movie.ratingValue }} </span>
                        </ng-template>
                        <ng-template [ngIf]="((movie.ratingValue <= 6.7) &&  (movie.ratingValue > 6))">
                            <span class="label label-warning"> {{ movie.ratingValue }} </span>
                        </ng-template>
                        <ng-template [ngIf]="(movie.ratingValue <= 6.0)">
                            <span class="label label-danger"> {{ movie.ratingValue }} </span>
                        </ng-template>
                    </td>
                    <td class="text-right">{{ movie.ratingCountString }}</td>
                </tr>
            </ng-template>

            </tbody>
        </table>
    </div>
</div>

<!-- EXAMPLE HOW TO USE ngIf WITH TEMPLATES

<ng-template ngFor let-movie [ngForOf]="displayedMovies">
    <ng-template #good>
        <span class="label label-success"> {{ movie.ratingValue }} </span>
    </ng-template>
    <ng-template #bad>
        <span class="label label-success"> {{ movie.ratingValue }} </span>
    </ng-template>

    <tr>
        <td>
            <a target="_blank" href= "{{ movie.imdbMovieUrl }}" > {{ movie.movie }} </a>
        </td>
        <td>{{ movie.year }}</td>
        <td *ngIf="movie.ratingValue > 6.7; then good else bad"></td>
        <td>{{ movie.ratingCount }}</td>
    </tr>
</ng-template>

-->

<!-- EXAMPLE: Alternative Solution with only ngFor
            <tbody *ngFor="let movie of displayedMovies">
                <tr>
                    <td>{{ movie.movie }}</td>
                    <td>{{ movie.year }}</td>
                    <td>{{ movie.ratingValue }}</td>
                    <td>{{ movie.ratingCount }}</td>
                </tr>
            </tbody>
-->


<!-- EXAMPLE HOW TO USE BOOTSTRAP BUTTON
<button [disabled]="!allowNewServer" class="btn btn-primary" (click)="registerForWebRequest()">Send Get Request</button>
-->

<!-- EXAMPLE HOW TO BIND CLASS PROPERTY
<p>Current network status: <span id="status" [ngClass] = this.onlineString>{{this.onlineString}}</span></p>
-->

<!-- EXAMPLE OF OLD OPTIONS CONTAINER
<hr *ngIf="false">
<div *ngIf="false" class="options-container">
    <md-slide-toggle (change)="this.showOptions = !this.showOptions" >Options</md-slide-toggle>
    <div *ngIf="this.showOptions" class="options">
        <br>
        <div id="yearContainer">
            <label>Year:
                <span class="label label-info">{{yearSliderValue.toString()}}</span>
            </label>
            <md-slider
                    min="1950"
                    max="2017"
                    step="1"
                    tickInterval="auto"
                    [value]="this.yearSliderValue"
                    thumbLabel="false"
                    (input)="mdSliderInput_Year($event)"
                    (change)="mdSliderChange_Year($event)"
            ></md-slider>
        </div>
        <div id="ratingValueContainer">
            <label>Rating Value:
                <span class="label label-info">{{ratingValueSliderValue.toLocaleString('en')}}</span>
            </label>
            <md-slider
                    min="1"
                    max="9.3"
                    step="0.1"
                    tickInterval="auto"
                    [value]="this.ratingValueSliderValue"
                    thumbLabel="false"
                    (input)="mdSliderInput_RatingValue($event)"
                    (change)="mdSliderChange_RatingValue($event)"
            ></md-slider>
        </div>
        <div id="ratingCountContainer">
            <label>Rating Count:
                <span class="label label-info">{{ratingCountSliderValue.toLocaleString('en')}}</span>
            </label>
            <md-slider
                    min="10000"
                    [max]="maxRatingCount"
                    step="100000"
                    tickInterval="1"
                    [value]=this.ratingCountSliderValue
                    thumbLabel="false"
                    (input)="mdSliderInput_RatingCount($event)"
                    (change)="mdSliderChange_RatingCount($event)"
            ></md-slider>
        </div>
    </div>

    <div *ngIf="!this.showOptions" class="settings row">
        <hr>
        <div class="col-xs-7">
            <label> Year:
                <span class="label label-info">{{yearSliderValue.toString()}}</span>
            </label>
            <label> Value:
                <span class="label label-info">{{ratingValueSliderValue.toLocaleString('en')}}</span>
            </label>
        </div>
        <div class="col-xs-5">
            <label>Count:
                <span class="label label-info">{{ratingCountSliderValue.toLocaleString('en')}}</span>
            </label>
        </div>
    </div>
</div>
-->